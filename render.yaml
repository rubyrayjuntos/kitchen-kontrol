services:
  - type: "postgres"
    name: "kitchen-kontrol-db"
    plan: "starter"
    region: "oregon"

  - type: "web_service"
    name: "kitchen-kontrol-backend"
    env: "docker"
    plan: "starter"
    buildCommand: ""
    startCommand: "node server.js"
    releaseCommand: "npm run migrate:up && npm run seed:pg"
    branch: "main"
    dockerfilePath: "Dockerfile.server"
    region: "oregon"
    envVars:
      - key: "NODE_ENV"
        value: "production"
      - key: "PORT"
        value: "3002"

  - type: "static_site"
    name: "kitchen-kontrol-frontend"
    branch: "main"
    buildCommand: "npm run build"
    publishPath: "build"
    region: "oregon"
    plan: "starter"
